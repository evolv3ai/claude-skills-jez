# Admin Context

Before making system changes, always consult the Admin system of record.

## Order of Operations

1. Explore the current machine + repo context first.
2. Then read Admin memory (profile, logs, issues) before deciding on commands.

## Where to Find the Device Profile

- **Windows**: `%USERPROFILE%\.admin\profiles\%COMPUTERNAME%.json`
- **macOS/Linux**: `~/.admin/profiles/$(hostname).json`
- **WSL**: `/mnt/c/Users/<WIN_USER>/.admin/profiles/$(hostname).json` (unless ADMIN_ROOT is explicitly set)

## What to Do at the Start of Every Session

1. Load the device profile
2. Read the last 3 log entries from `logs/operations.log`
3. Read the last 3 issues from `issues/`
4. Ask the user what they need help with

## Golden Rules

- **Prefer user preferences**: Use the profile's preferred package manager, Python manager, Node manager
- **Log everything**: Every install, change, and session should produce a log entry
- **Track issues**: Create an issue file for troubleshooting and record resolution + verification
- **Never store secrets in skills**: Keep secrets under `ADMIN_ROOT/.env` or `ADMIN_ROOT/config/`
- **Ask when uncertain**: If confidence is low or action is destructive, pause and ask

## Directory Structure

```
ADMIN_ROOT/
  .env                    # Environment variables (secrets here)
  AGENTS.md               # This file
  profiles/               # Device profiles (one per hostname)
  logs/                   # Operation logs
    operations.log        # Main log file
    devices/              # Per-device history
  issues/                 # Issue tracking files
  registries/             # MCP, skills, devops registries
  config/                 # Configuration files
  backups/                # Backup files
  scripts/                # Utility scripts
  inbox/                  # Incoming requests
```

## Quick Commands

### PowerShell (Windows)
```powershell
# Load profile
. $env:USERPROFILE\.admin\...\Load-Profile.ps1
Load-AdminProfile -Export

# Start session
Show-AdminSessionStart

# Log an event
Log-AdminEvent "Installed node v22" -Level "OK"

# Create an issue
New-AdminIssue -Title "Audio driver problem" -Category troubleshoot -Tags @("audio")
```

### Bash (WSL/macOS/Linux)
```bash
# Load profile
source ~/.admin/.../load-profile.sh
load_admin_profile

# Start session
show_admin_session_start

# Log an event
log_admin_event "Installed node v22" "OK"

# Create an issue
new_admin_issue "Audio driver problem" "troubleshoot" "audio"
```

## Categories

When routing requests, classify into:
- **troubleshoot**: Fix problems, diagnose issues
- **install**: Install apps, tools, packages
- **devenv**: Set up development environments
- **mcp**: MCP server management
- **skills**: AI skills management
- **devops**: Server/infrastructure management

---

*Generated by Admin setup. Regenerate with `Update-AgentsMd.ps1` or `update-agents-md.sh`*
