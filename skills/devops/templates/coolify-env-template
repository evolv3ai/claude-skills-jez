# Coolify Environment Configuration Template
# Copy this to project root as .env.local and fill in your values
# WARNING: Never commit .env.local to version control!

# =============================================================================
# Server Connection
# =============================================================================

# Server IP Address - Where Coolify will be installed
# Can be:
# - Public IP of your cloud server
# - Private IP if using VPN/tunnel
# - localhost if installing locally
SERVER_IP=

# SSH Configuration
SSH_USER=ubuntu
SSH_PRIVATE_KEY_PATH=~/.ssh/id_rsa
SSH_PORT=22

# =============================================================================
# Coolify Installation Configuration
# =============================================================================

# Coolify Admin Credentials
# These will be used to create the initial admin account
ROOT_USERNAME=admin
ROOT_USER_EMAIL=admin@coolify.local
ROOT_USER_PASSWORD=your_secure_password_here

# Coolify Port Configuration
# Default web interface port (internal)
COOLIFY_PORT=8000

# Proxy Ports (Traefik)
# HTTP and HTTPS ports for deployed applications
COOLIFY_HTTP_PORT=80
COOLIFY_HTTPS_PORT=443

# Proxy additional ports
COOLIFY_PROXY_PORT_6001=6001
COOLIFY_PROXY_PORT_6002=6002

# =============================================================================
# Docker Configuration
# =============================================================================

# Docker Version
# Leave empty for latest stable, or specify version (e.g., "24.0")
DOCKER_VERSION=

# Docker Compose Plugin
# Installed automatically with Docker
DOCKER_COMPOSE_VERSION=latest

# =============================================================================
# Coolify Version
# =============================================================================

# Coolify Version
# Leave empty for latest stable version
# Or specify version tag (e.g., "4.0.0")
COOLIFY_VERSION=

# =============================================================================
# Firewall Configuration
# =============================================================================

# Enable automatic firewall configuration
# Set to true to automatically configure UFW firewall
AUTO_CONFIGURE_FIREWALL=true

# Firewall Ports to Open
# Comma-separated list of ports to allow
# Default: 22 (SSH), 8000 (Coolify UI), 80 (HTTP), 443 (HTTPS), 6001, 6002 (Proxy)
FIREWALL_ALLOWED_PORTS=22,8000,80,443,6001,6002

# =============================================================================
# Cloudflare Tunnel Integration (Optional)
# =============================================================================

# Enable Cloudflare Tunnel for secure external access
# If enabled, Coolify web UI will be accessible via tunnel hostname
# This allows you to close port 8000 externally for better security
ENABLE_CLOUDFLARE_TUNNEL=false

# Cloudflare Tunnel Configuration (if ENABLE_CLOUDFLARE_TUNNEL=true)
# See cloudflare-tunnel skill for details
TUNNEL_NAME=coolify-tunnel
TUNNEL_HOSTNAME=coolify.yourdomain.com

# Cloudflare API Configuration (if using tunnel)
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_ZONE_ID=

# =============================================================================
# Advanced Configuration (Optional)
# =============================================================================

# Coolify Data Directory
# Where Coolify stores application data and deployments
COOLIFY_DATA_DIR=/data/coolify

# Coolify Environment
# Options: production, development
COOLIFY_APP_ENV=production

# Enable Debug Mode
# Set to true for detailed logging (not recommended for production)
COOLIFY_APP_DEBUG=false

# Database Configuration (auto-generated by Coolify)
# Leave these empty - Coolify will generate secure passwords
COOLIFY_DB_PASSWORD=
COOLIFY_REDIS_PASSWORD=

# =============================================================================
# Auto-Generated Variables (populated by installation script)
# =============================================================================

# Server Public IP (auto-detected during installation)
# SERVER_PUBLIC_IP=

# Installation Completion Timestamp
# INSTALL_COMPLETED_AT=

# Coolify Container IDs
# COOLIFY_CONTAINER_ID=
# COOLIFY_PROXY_CONTAINER_ID=

# =============================================================================
# Example Configurations
# =============================================================================

# Example 1: Local development installation
# SERVER_IP=localhost
# COOLIFY_PORT=8000
# ENABLE_CLOUDFLARE_TUNNEL=false
# COOLIFY_APP_ENV=development

# Example 2: Production server with Cloudflare Tunnel
# SERVER_IP=203.0.113.10
# COOLIFY_PORT=8000
# ENABLE_CLOUDFLARE_TUNNEL=true
# TUNNEL_HOSTNAME=coolify.mycompany.com
# COOLIFY_APP_ENV=production

# Example 3: VPS with custom ports
# SERVER_IP=198.51.100.20
# COOLIFY_PORT=8080
# COOLIFY_HTTP_PORT=8000
# COOLIFY_HTTPS_PORT=8443

# =============================================================================
# Post-Installation Steps
# =============================================================================

# After installation:
# 1. Access Coolify at http://SERVER_IP:8000 (or https://TUNNEL_HOSTNAME)
# 2. Login with ROOT_USER_EMAIL and ROOT_USER_PASSWORD
# 3. Add localhost as first server in Coolify UI
# 4. Configure server resources (CPU, memory limits)
# 5. Connect GitHub/GitLab account
# 6. Deploy your first application!

# =============================================================================
# Troubleshooting
# =============================================================================

# Check Coolify status:
# ssh SERVER_IP "docker ps | grep coolify"

# View Coolify logs:
# ssh SERVER_IP "docker logs coolify"

# Restart Coolify:
# ssh SERVER_IP "docker restart coolify"

# Check firewall status:
# ssh SERVER_IP "sudo ufw status"

# Test Coolify access:
# curl http://SERVER_IP:8000
